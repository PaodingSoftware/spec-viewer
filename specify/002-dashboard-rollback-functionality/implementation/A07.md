# 实现记录 - A07

## 行动信息
- **编号**: A07
- **描述**: 在 dashboard.js 中为讨论列表项添加删除按钮（鼠标悬停显示），绑定点击事件发送 deleteDiscussion 消息，传递 topicDirName 和 discussionId 参数

## 实现细节

### 修改的文件
- `extension/webview/dashboard/dashboard.js`

### 代码变更

#### 在 renderDiscussionList 函数中添加删除按钮
```javascript
// Add delete button
const deleteBtn = document.createElement('button');
deleteBtn.className = 'delete-item-btn';
deleteBtn.innerHTML = '<i class="fas fa-trash-alt"></i>';
deleteBtn.title = 'Delete Discussion';
deleteBtn.addEventListener('click', (e) => {
    e.stopPropagation();
    if (confirm(`Delete discussion ${discussion.id}?\n\nThis will renumber all subsequent discussions.`)) {
        vscode.postMessage({
            command: 'deleteDiscussion',
            topicDirName: dashboardData.currentTopic.dirName,
            discussionId: discussion.id
        });
    }
});

item.appendChild(icon);
item.appendChild(discussionInfo);
item.appendChild(deleteBtn);
```

### 技术要点
1. **鼠标悬停显示**: 按钮默认隐藏（`opacity: 0`），hover 时显示
2. **确认对话框**: 使用 `confirm()` 提示用户删除操作的影响
3. **消息传递**: 
   - `command`: 'deleteDiscussion'
   - `topicDirName`: 当前主题目录名
   - `discussionId`: 讨论记录 ID（如 'D01'）
4. **事件隔离**: 使用 `stopPropagation()` 防止触发列表项的点击事件
5. **用户反馈**: 提示用户删除会重新编号后续讨论

---
*创建时间: 2025-10-11*
